(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-581950f1"],{"5e9c":function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return l}));const s=function(e,t=!1){const a=localStorage.getItem(e);if(!a)return!1;try{return t?JSON.parse(a):JSON.parse(a).data}catch(s){console.log("getLocalStorage: ",s),localStorage.removeItem(e)}},l=function(e,t){console.log("setLocalStorage",e,t);const a={ver:(new Date).getTime(),data:t},s=JSON.stringify(a);localStorage.setItem(e,s)}},cf2a:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wbs-content"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:!e.isLoaded,expression:"!isLoaded"}],staticClass:"wbs-content-inner full",class:{"wb-page-loaded":e.isLoaded}},[a("div",{staticClass:"wbs-main"},[a("div",{staticClass:"wbs-ctrl-bar mt"},[a("el-select",{staticClass:"ctrl-item w8em",attrs:{clearable:"",placeholder:"支付状态",size:"small"},model:{value:e.q.status,callback:function(t){e.$set(e.q,"status",t)},expression:"q.status"}},e._l(e.cnf.status,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),1),a("el-select",{staticClass:"ctrl-item w8em",attrs:{clearable:"",filterable:"",placeholder:"支付方式",size:"small"},model:{value:e.q.pay_type,callback:function(t){e.$set(e.q,"pay_type",t)},expression:"q.pay_type"}},e._l(e.cnf.pay_types,(function(e,t){return a("el-option",{key:t,attrs:{filterable:"",label:e,value:t}})})),1),a("el-select",{staticClass:"ctrl-item w8em",attrs:{clearable:"",filterable:"",placeholder:"订单类型",size:"small"},model:{value:e.q.order_uid,callback:function(t){e.$set(e.q,"order_uid",t)},expression:"q.order_uid"}},e._l(e.cnf.order_types,(function(e,t){return a("el-option",{key:t,attrs:{filterable:"",label:e,value:t}})})),1),a("el-date-picker",{staticClass:"ctrl-item when-m-hide",attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small"},on:{change:e.selectDate},model:{value:e.daterange,callback:function(t){e.daterange=t},expression:"daterange"}}),a("el-input",{staticClass:"ctrl-item wbs-input-short",attrs:{placeholder:"订单号/用户名/邮箱/标识码",clearable:"",size:"small"},on:{clear:e.doSearch},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearch.apply(null,arguments)}},model:{value:e.q.q,callback:function(t){e.$set(e.q,"q",t)},expression:"q.q"}}),a("el-input",{staticClass:"ctrl-item w8em",attrs:{placeholder:"资源名称",clearable:"",size:"small"},on:{clear:e.doSearch},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearch.apply(null,arguments)}},model:{value:e.q.title,callback:function(t){e.$set(e.q,"title",t)},expression:"q.title"}}),a("div",{staticClass:"ctrl-item ib"},[a("el-button",{attrs:{type:"primary",plain:"",name:"search",size:"small"},on:{click:e.doSearch}},[e._v("筛选")]),a("el-button",{staticClass:"when-m-hide",attrs:{plain:"",name:"reset",size:"small"},on:{click:e.resetSearch}},[e._v("重置")])],1),a("div",{staticClass:"switch-btn align-right",on:{click:e.togglePanel}},[e.is_expanded?a("div",[a("i",{staticClass:"el-icon-arrow-up"}),e._v(" "),a("span",[e._v("收起面板")])]):a("div",[a("i",{staticClass:"el-icon-search"}),e._v(" "),a("span",[e._v("筛选")])])])],1),e.isLoaded?a("div",{staticClass:"mt log-box"},[a("el-table",{staticClass:"wbs-table",staticStyle:{width:"100%"},attrs:{data:e.list},on:{"sort-change":e.sortChange}},[a("el-table-column",{attrs:{label:"订单号","class-name":"w10"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{attrs:{"data-label":"订单号"}},[a("span",[e._v(e._s(t.row.order_no))])])]}}],null,!1,1317729037)}),a("el-table-column",{attrs:{label:"付费项目"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{attrs:{"data-label":"付费项目"}},[a("a",{staticClass:"display-value",attrs:{href:t.row.post_url,target:"_blank"}},[e._v(e._s(t.row.name))])])]}}],null,!1,2532075254)}),a("el-table-column",{attrs:{align:"center",width:"40","sort-by":"money",sortable:"custom",label:"金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{attrs:{"data-label":"金额"}},[a("span",[e._v(e._s(t.row.money))])])]}}],null,!1,2433040961)}),a("el-table-column",{attrs:{"sort-by":"created",label:"日期","class-name":"w10",align:"center",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{attrs:{"data-label":"日期"}},[a("span",{staticClass:"display-value",domProps:{innerHTML:e._s(e.dateFormat(t.row.created))}})])]}}],null,!1,1007796008)}),a("el-table-column",{attrs:{label:"用户名/邮箱/标识码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{attrs:{"data-label":"用户"}},[a("div",{staticClass:"multiple-value"},[a("span",[e._v(e._s(t.row.user_login||"-"))]),a("span",[e._v(" / "+e._s(t.row.user_email||"-"))]),t.row.verify_code?a("span",[e._v(" / "+e._s(t.row.verify_code))]):e._e()])])]}}],null,!1,1823127502)}),a("el-table-column",{attrs:{label:"支付方式",align:"center","class-name":"w10"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{attrs:{"data-label":"支付方式"}},[a("span",[e._v(e._s(e.cnf.pay_types[t.row.pay_type]))])])]}}],null,!1,2695284620)}),a("el-table-column",{attrs:{label:"支付状态",align:"center","class-name":"w10"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{attrs:{"data-label":"支付状态"}},[a("span",[e._v(e._s(e.cnf.pay_status[t.row.pay_status]))])])]}}],null,!1,1696038686)})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.list.length>0,expression:"list.length > 0"}],staticClass:"btns-bar with-ctrl-area"},[a("div",{staticClass:"wb-ctrl-area"}),a("el-pagination",{attrs:{background:"","page-size":e.num,total:1*e.total,layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100]},on:{"size-change":e.handleSizeChange,"current-change":e.navPage}})],1)],1):e._e(),a("wb-prompt",{directives:[{name:"show",rawName:"v-show",value:e.isLoaded,expression:"isLoaded"}],staticClass:"mt"})],1)])])},l=[],n=a("5e9c");const r="WB_PLUGINS_USER_OPT_"+window.uid;var i={name:"ManagerOrderList",inject:["reload"],props:["pid"],data(){return{isLoaded:!1,cnf:{},list:[],isLoading:!0,total:0,page:1,num:30,order:"desc",daterange:[],q:{pid:"",order_uid:"",pay_type:"",status:"2",search:"",fromdate:"",todate:"",q:"",title:""},search:{},is_expanded:0,multipleSelection:[],batch_op:""}},created(){const e=this,t=Object(n["a"])(r)||{};e.num=t["PAGE_SIZE"]||30,this._getData(),this.loadCnf(),e.pid&&(e.q.pid=e.pid),e.$isPrdActive(e.$WB)},methods:{_getData(){const e=this,t={action:"vk_order",do:"get_order_list",status:2,num:e.num};e.pid&&(t.pid=e.pid),e.$api.getData(t).then(t=>{e.list=t.data,e.total=t.total})},resetSearch(){const e=this;e.q={pid:"",status:"2",pay_type:"",order_uid:"",fromdate:"",todate:"",title:"",q:""},Object.assign(e.search,e.q),e.daterange=[],e.page=1,e.loadList()},loadCnf(){const e=this;e.$api.getData({action:"vk_order",do:"get_order_cnf"}).then(t=>{e.cnf=t.data,e.isLoaded=!0})},sortChange(e){if("custom"!=e.column.sortable)return;if(!e.order)return;const t=this;t.search.page=t.page,t.search.orderby=e.column.sortBy,t.search.order="ascending"==e.order?"asc":"desc",t.total>0&&t.loadList()},navPage(e){this.page=e,this.loadList()},doSearch(){this.page=1,Object.assign(this.search,this.q),this.loadList()},doFilter(e,t){const a=this;let s={};a.page=1,s[e]=t,a.q[e]=t,Object.assign(this.search,s),this.loadList()},loadList(){const e=this;e.isLoading=e.$wbui.loading();let t={action:"vk_order",do:"get_order_list",page:e.page};Object.assign(t,e.search),e.$api.getData(t).then(t=>{e.list=t.data,e.total=t.total,e.$wbui.close(e.isLoading)})},togglePanel(){const e=this;e.$el.querySelector(".wbs-ctrl-bar").classList.toggle("expand"),e.is_expanded=!e.is_expanded},dateFormat(e){if(this.$cnf.is_mobile)return e;const t=e.split(" ");return t.length>1?'<span class="ib">'+t[0]+'</span> <span class="ib">'+t[1]+"</span>":e},selectDate(){const e=this;e.daterange?(e.q.fromdate=e.daterange[0],e.q.todate=e.daterange[1]):(e.q.fromdate="",e.q.todate="")},handleSizeChange(e){const t=this,a=Object(n["a"])(r)||{};t.num=e,t.page=1,a["PAGE_SIZE"]=e,Object(n["b"])(r,a),sessionStorage.clear(),t.loadList()}}},o=i,c=a("2877"),d=Object(c["a"])(o,s,l,!1,null,null,null);t["default"]=d.exports}}]);